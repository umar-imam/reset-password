<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8" /> <title>Password Reset</title> <!-- Font Awesome for the eye / eye-slash icons --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" /> <!-- (Optional) Bootstrap Icons – keep if you use other BI icons elsewhere --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" /> <style> body{ font-family:'Segoe UI',sans-serif; background-color:#f4f4f4; display:flex; justify-content:center; align-items:center; height:100vh; margin:0; } .container{ background:#fff; padding:30px; border-radius:10px; width:340px; box-shadow:0 4px 10px rgba(0,0,0,.1); } h2{ text-align:center; margin-bottom:25px; } label{ font-weight:500; margin-bottom:5px; display:block; } .input-group{ position:relative; margin-bottom:15px; } .input-group input[type="password"], .input-group input[type="text"]{ width:100%; padding:10px 40px 10px 10px; border:1px solid #ccc; border-radius:5px; font-size:14px; box-sizing:border-box; } .toggle-password{ position:absolute; top:50%; right:10px; transform:translateY(-50%); cursor:pointer; color:#555; font-size:18px; z-index:2; } .message{ font-size:.85em; color:#d93025; margin-top:-10px; margin-bottom:10px; display:none; } button{ width:100%; padding:10px; background-color:#00bcd4; color:white; border:none; border-radius:5px; font-weight:bold; font-size:15px; cursor:pointer; } button:hover{background-color:#0097a7;} .login-btn{ background-color:#4caf50; margin-top:10px; } .login-btn:hover{background-color:#45a049;} #confirmationMessage{ font-size:1em; margin-top:15px; text-align:center; } </style> </head> <body> <div class="container"> <h2>Reset Your Password</h2> <label>Default Password</label> <div class="input-group"> <input type="password" id="defaultPassword" placeholder="Enter default password" /> <i class="fas fa-eye toggle-password" onclick="togglePassword(this,'defaultPassword')"></i> </div> <label>New Password</label> <div class="input-group"> <input type="password" id="newPassword" placeholder="Enter new password" onkeyup="checkStrength()" /> <i class="fas fa-eye toggle-password" onclick="togglePassword(this,'newPassword')"></i> </div> <div id="strengthMessage" class="message"></div> <label>Confirm Password</label> <div class="input-group"> <input type="password" id="confirmPassword" placeholder="Re-enter new password" onkeyup="checkMatch()" /> <i class="fas fa-eye toggle-password" onclick="togglePassword(this,'confirmPassword')"></i> </div> <div id="matchMessage" class="message"></div> <button onclick="resetPassword()">Reset Password</button> <div id="confirmationMessage"></div> <button id="loginBtn" class="login-btn" style="display:none;" onclick="navigateToLogin()">Login</button> </div> <script> /* ---------- 1. Read & parse ?issued= ----------- */ const params = new URLSearchParams(window.location.search); const issuedParam = params.get("issued"); // e.g. "10-06-2025" or "2025-06-10" function parseIssuedDate(str){ if(!str) return new Date(); // fallback = today /* ISO-8601 (YYYY-MM-DD) – always safe in JS */ if(/^\d{4}-\d{2}-\d{2}$/.test(str)) return new Date(str + "T00:00:00"); /* European-style (DD-MM-YYYY) */ if(/^\d{2}-\d{2}-\d{4}$/.test(str)){ const [d,m,y] = str.split("-").map(Number); return new Date(y, m-1, d); // months are 0-based } /* Fallback: let Date() try its best */ return new Date(str); } const issuedDate = parseIssuedDate(issuedParam); issuedDate.setHours(0,0,0,0); // strip time part /* ---------- 2. UI helpers ---------- */ function togglePassword(icon, fieldId){ const input = document.getElementById(fieldId); const isPassword = input.type === "password"; input.type = isPassword ? "text" : "password"; icon.classList.toggle("fa-eye"); icon.classList.toggle("fa-eye-slash"); } function checkStrength(){ const pwd = document.getElementById("newPassword").value; const msg = document.getElementById("strengthMessage"); const strongRegex = /^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/; if(!pwd){ msg.style.display = "none"; } else if(!strongRegex.test(pwd)){ msg.textContent = "Use 8+ characters with uppercase, number & symbol."; msg.style.display = "block"; } else { msg.style.display = "none"; } } function checkMatch(){ const newPwd = document.getElementById("newPassword").value; const confirmPwd = document.getElementById("confirmPassword").value; const msg = document.getElementById("matchMessage"); if(!confirmPwd){ msg.style.display = "none"; } else if(newPwd !== confirmPwd){ msg.textContent = "Passwords do not match."; msg.style.display = "block"; } else { msg.style.display = "none"; } } /* ---------- 3. Main reset handler ---------- */ function resetPassword(){ const defaultPwd = document.getElementById("defaultPassword").value; const newPwd = document.getElementById("newPassword").value; const confirmPwd = document.getElementById("confirmPassword").value; const msgBox = document.getElementById("confirmationMessage"); /* (a) Check link age */ const today = new Date(); today.setHours(0,0,0,0); const daysPassed = Math.floor((today - issuedDate) / (1000*60*60*24)); if(daysPassed > 7){ msgBox.textContent = "Password has expired. Please request a new one."; msgBox.style.color = "red"; document.getElementById("loginBtn").style.display = "none"; return; } /* (b) Basic field checks */ if(!defaultPwd || !newPwd || !confirmPwd){ alert("All fields are required."); return; } if(newPwd !== confirmPwd){ alert("New passwords do not match."); return; } /* (c) Clear fields & show success */ document.getElementById("defaultPassword").value = ""; document.getElementById("newPassword").value = ""; document.getElementById("confirmPassword").value = ""; document.getElementById("strengthMessage").style.display = "none"; document.getElementById("matchMessage").style.display = "none"; msgBox.textContent = "Password has been reset successfully!"; msgBox.style.color = "green"; document.getElementById("loginBtn").style.display = "block"; /* TODO: Hook in back-end call here (fetch / Ajax / Power Automate) */ } function navigateToLogin(){ window.location.href = "https://umar-imam.github.io/Home_page/Home_page.html"; } </script> </body> </html>
